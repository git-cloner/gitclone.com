{% extends "base.html" %}
{% block title %}{{Tr(Lang, "name")}} - {{Tr(Lang, "tag_line")}}{% endblock %}
{% block body %}
<script type='text/javascript' src='https://images.sohu.com/cs/jsfile/js/c.js'></script>
	<div class="ui inverted vertical masthead center aligned segment">
	  {% include Page.NavbarTplPath %}

	  <div class="ui text container">
			<div class="home-title">
				<img src="/img/favicon.ico" style="width:300px" >
				<!-- <h1 style="margin-top: -10px;" class="ui inverted header">
					{{Tr(Lang, "home.title")}}
				</h1> -->
			</div>
			<style>
				.home-title {
					display: flex;
					justify-content: center;
					align-items: center;
					margin-top: 80px;
				}
				.home-search-wrapper {
					display: flex;
					margin-top: 40px;
				}
				.home-input {
					width: 600px;
					height:50px;
					border-radius:  10px 0px 0px 10px ;
					padding-left: 20px;
					outline: none;
				}
				.home-search {
					width: 100px;
					height: 50px;
					text-align: center;
					color: #ffffff;
					background-color: #4e6ef2;
					border-radius: 0px 10px 10px 0px;
				}
				.home-search:hover {
					background-color: #4662d9;
					color: #ffffff;
					cursor: pointer;
				}
				.search-a {
					line-height: 50px;
					color: #ffffff!important
				}
				.hot-search {
					margin-top: 15px;
					width: 700px;
					padding-left: 10px;
					color: #ffffff;
				}
				.hot-search-item {
					color: #ffffff;
					margin: 0px 5px;
				}
				.introduce-part {
					margin-top: 105px;
					margin-bottom: 20px;
				}
			</style>
			<!--输入框部分-->
			<div class="home-search-wrapper">
				<input id="home-input" class="home-input" value="" placeholder="{{Tr(Lang, 'home.temp_code14')}}" />
				<div class="home-search" onclick="search()"><span class="search-a">{{Tr(Lang, "home.temp_code13")}}</span></div>
			</div>
			<div id="hot-search" class="hot-search">
				<span class="hot-search-item">{{Tr(Lang, "home.temp_code12")}}:</span>
			</div>

			<!--介绍的部分-->
			<div style="margin-bottom: -60px">
				<div id="introduce-part" class="introduce-part">
					<h2 style="color:#ffffff">{{Tr(Lang, "home.tag_line")}}</h2>
				</div>
				<h2 style="margin-top: 20px;">
					<a href="https://www.gitclone.com/gogs/vipserver" onclick="axios({method: 'get',url: 'https://gitclone.com/gitcache/stat/vipvisit/'}).then(function(res){})">
						{{Tr(Lang, "home.temp_code3")}}
					</a>
				</h2>
			</div>
	    <!-- <a class="ui huge primary button" href="{{Page.DocsBaseURL}}">{{Tr(Lang, "home.get_started")}} <i class="right arrow icon"></i></a> -->
		</div>
	</div>


	<div class="ui vertical stripe segment" style="flex: 2;">
		<style>
			@keyframes fadenum1 { /*设置内容由显示变为隐藏*/
				0%{opacity: 0;}
				0.0005%{opacity: 0;}
				0.0025%{opacity: 1}
				100%{opacity: 1;}
			}
			.fadenum1 {
				animation: fadenum1 100000s infinite;
			}
			@keyframes fadenum { /*设置内容由显示变为隐藏*/
				0%{opacity: 0;}
				0.002%{opacity: 1}
				100%{opacity: 1;}
			}
			.fadenum {
				animation: fadenum 100000s infinite;
			}
		</style>
		<div class="ui aligned stackable two column grid container">
			<div class="column fadenum">
				<div style="width: 100%;margin: 5px;">
					<span style="font-size: 2.5em;font-weight: bold;text-align:center">
						{{Tr(Lang, "home.temp_code4")}}
					</span>
				</div>
				<div style="margin-top: 10px;margin-left: 5px; padding-right: 20px;">
						<p style="font-family: Lato, Helvetica Neue, Microsoft YaHei, Arial, Helvetica, sans-serif !important;color:#696969">
							{{Tr(Lang, "home.temp_code5")}}
						</p>
				</div>
				<div
					style="
						width: 100%;
						flex: 1;
						background-color: #1b1c1d;
						color: rgba(255,255,255,.9);
						padding-left: 15px;
						padding-top: 10px;
						margin-top: 20px;
						padding-bottom: 10px;
						box-shadow: 1px 1px 5px 3px #888888;
						border-radius: 10px;
					"
				>
					<p style="line-height: 0.8em;"><span style="color: #6A737D">{{Tr(Lang, "home.temp_code8")}}</span></p>
					<p style="line-height: 1.0em;">git clone https://gitclone.com/github.com/tendermint/tendermint.git</p>
					<p style="line-height: 0.2em;"><span style="color: #6A737D">{{Tr(Lang, "home.temp_code9")}}</span></p>
					<p style="line-height: 0.8em;">git config --global url."https://gitclone.com/".insteadOf https://</p>
					<p style="line-height: 0.8em;">git clone https://github.com/tendermint/tendermint.git</p>
					<p style="line-height: 0.2em;"><span style="color: #6A737D">{{Tr(Lang, "home.temp_code10")}}</span></p>
					<p style="line-height: 1.0em;">cgit clone https://github.com/tendermint/tendermint.git</p>
				</div>
			</div>
			<div class="column fadenum1">
				<div style="width: 100%;margin: 5px;">
					<span style="font-size: 2.5em;font-weight: bold;text-align:center">
						{{Tr(Lang, "home.temp_code6")}}
					</span>
				</div>
				<div style="margin-top: 10px;margin-left: 5px; padding-right: 20px;">
					<p style="font-family: Lato, Helvetica Neue, Microsoft YaHei, Arial, Helvetica, sans-serif !important;color:#696969">
						{{Tr(Lang, "home.temp_code7")}}
					</p>
				</div>
				<div
					style="
						width: 100%;
						background-color: #1b1c1d;
						color: rgba(255,255,255,.9);
						margin-top: 20px;
						padding-top: 30px;
						padding-bottom: 30px;
						box-shadow: 1px 1px 5px 3px #888888;
						border-radius: 10px;
					"
				>
					<p style="line-height: 0.2em;color: #1b1c1d;">git clone https://gitclone.com/github.com/tendermint/tendermint.git</p>
					<img src="/img/data.png" style="height: 80%; width: 100%;border-radius: 10px;" alt="">
				</div>
			</div>
		</div>
	</div>


	<div class="ui vertical stripe segment" style="flex: 0;">
		<div class="ui aligned stackable three column grid container" >
			<div style="font-size: 2.5em;font-weight: bold;text-align:center;padding-bottom: 30px;">
				{{Tr(Lang, "home.temp_code11")}}
				<span style="font-size: 18px;">({{Tr(Lang, "home.temp_code1")}}</span>
				<span id="dongtai" style="color: #15bb0f;font-size: 18px;"></span>
				<span style="font-size: 18px;">{{Tr(Lang, "home.temp_code2")}})</span>
			</div>
			<table class="ui blue table">
				<thead>
					<tr>
						<th>{{Tr(Lang, "home.node_name")}}</th>
						<th>{{Tr(Lang, "home.node_ip")}}</th>
						<th>{{Tr(Lang, "home.node_time")}}</th>
						<th>{{Tr(Lang, "home.node_id")}}</th>
					</tr>
				</thead>
				<tbody id="nodetbody">
				</tbody>
			</table>
		</div>
	</div>

	<div class="ui vertical stripe segment" style="flex: 2;">
		<div class="ui aligned stackable three column grid container">
			<div class="column">
				<h3 class="ui header">
					<i class="world icon"></i> {{Tr(Lang, "home.multi_lang")}}
				</h3>
				<p>{{Tr(Lang, "home.multi_lang_desc")}}</p>
				<p>{{Tr(Lang, "home.multi_lang_desc1")}}</p>
				<p>{{Tr(Lang, "home.multi_lang_desc2")}}</p>
			</div>
			<div class="column">
				<h3 class="ui header">
					<i class="lightning icon"></i> {{Tr(Lang, "home.real_time")}}
				</h3>
				<p>{{Tr(Lang, "home.real_time_desc")}}</p>
				<p>{{Tr(Lang, "home.real_time_desc1")}}</p>
				<p>{{Tr(Lang, "home.real_time_desc2")}}</p>
			</div>
			<div class="column">
				<h3 class="ui header">
					<i class="search icon"></i> {{Tr(Lang, "home.searchable")}}
				</h3>
				<p>{{Tr(Lang, "home.searchable_desc")}}</p>
				<p>{{Tr(Lang, "home.searchable_desc1")}}</p>
				<p>{{Tr(Lang, "home.searchable_desc2")}}</p>
			</div>
		</div>
	</div>
	<script>
		var tempRequestAddress = 'http://192.168.10.9:5000/gitcache/system/info'
		var RequestAddress = 'https://gitclone.com/gitcache/system/info/'
		var hotSearchDataURL = 'https://gitclone.com/gitcache/system/recommend/'

		// 输入框相关
		var homeInput = document.getElementById("home-input")
		var homeIntroduce = document.getElementById("introduce-part")
		function search() {
			if (homeInput.value !== "") {
				axios({method: 'get',url: 'https://gitclone.com/gitcache/stat/search'}).then(function(res){
					window.open(`https://www.gitclone.com/gogs/search/clonesearch?q=${homeInput.value}`,"_self")
				})
			}
		}


		// 获取热搜数据信息
		axios({
			method:'get',
			url: hotSearchDataURL
		}).then(function(res){
			var rs = [
				{name: "gitcache",path: "1"},
				{name: "qa_common_codes",path: "1"},
				{name: "shattered-pixel-dungeon",path: "1"},
				{name: "deap",path: "1"},
				{name: "from_coder_to_expert",path: "1"},
				{name: "wechat-deleted-friends",path: "1"},
				{name: "abigteam_server",path: "1"},
				{name: "documents",path: "1"},
				{name: "LOLBAS",path: "1"},
				{name: "paddy-sketch-plugin",path: "1"},
			]


			if (Array.isArray(res.data)) {
				var hotSearchDataNode = document.getElementById("hot-search")
				res.data.map((item, index) => {
					let tempNode = document.createElement("a")
					tempNode.classList.add("ui","inverted", "button")
					tempNode.innerHTML = item.name
					tempNode.style.margin="2.5px 5px"
					tempNode.style.fontSize="12px"
					tempNode.style.fontWeight="normal"
					tempNode.href = `https://www.gitclone.com/gogs/search/clonesearch?q=${item.path}`
					hotSearchDataNode.appendChild(tempNode)
				})
			}
		})



		axios({
			method: 'get',
			url: RequestAddress
		})
		.then(function(res){
			var count = res.data.count
			var nodes = res.data.nodes
			var size = res.data.size
			var info = size  + '[' + nodes + '(' + count + ')]'
			document.getElementById("dongtai").innerHTML = ` ${info} `
		})
		.catch(function(error) {
			console.log(error)
		})


		Date.prototype.format = function(fmt) {
			var o = {
				"M+" : this.getMonth()+1,                 //月份
				"d+" : this.getDate(),                    //日
				"h+" : this.getHours(),                   //小时
				"m+" : this.getMinutes(),                 //分
				"s+" : this.getSeconds(),                 //秒
				"q+" : Math.floor((this.getMonth()+3)/3), //季度
				"S"  : this.getMilliseconds()             //毫秒
			};
			if(/(y+)/.test(fmt)) {
				fmt=fmt.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length));
			}
			for(var k in o) {
					if(new RegExp("("+ k +")").test(fmt)){
							fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));
					}
			}
			return fmt; 
		}

		// 获取节点信息
		let nodeData = []
		var timeAll = ""
		var block_height = ""

		axios({
			method: 'get',
			url: "https://gitclone.com/tendermint/status"
		})
		.then(function(res){
			// request first node
			let data = res.data.result
			let tbody = document.getElementById("nodetbody")
			let tr = document.createElement("tr")
			let td1 = document.createElement("td")
			td1.innerHTML = data["node_info"]["moniker"]
			tr.appendChild(td1)

			let td2 = document.createElement("td")
			td2.innerHTML = "192.168.**.54"
			tr.appendChild(td2)

			let td3 = document.createElement("td")
			let time = data["sync_info"]["latest_block_time"]
			let timeYY = new Date(time).format("yyyy-MM-dd hh:mm:ss")
			timeAll = timeYY
			td3.innerHTML = timeYY
			tr.appendChild(td3)


			let td4 = document.createElement("td")
			let height = data["sync_info"]["latest_block_height"]
			block_height = height
			td4.innerHTML = block_height
			tr.appendChild(td4)
			tbody.appendChild(tr)

			// request another three nodes
			axios({
				method: 'get',
				url: "https://gitclone.com/tendermint/net_info"
			})
			.then(function(res){
				nodeData = res.data.result.peers
				let tbody = document.getElementById("nodetbody")
				for (let i = 0; i < nodeData.length; i++) {
					let tr = document.createElement("tr")
					let td1 = document.createElement("td")
					td1.innerHTML = nodeData[i]["node_info"]["moniker"]
					tr.appendChild(td1)
					let td2 = document.createElement("td")
					let ip =nodeData[i]["remote_ip"]
					ip = ip.replace(".10.",".**.")
					td2.innerHTML = ip
					tr.appendChild(td2)
					let td3 = document.createElement("td")
					// let time = nodeData[i]["connection_status"]["SendMonitor"]["Start"]
					// let timeYY = time.slice(0,10) + " "+  time.slice(11,19)
					td3.innerHTML = timeAll
					tr.appendChild(td3)
					let td4 = document.createElement("td")
					td4.innerHTML = block_height
					tr.appendChild(td4)
					tbody.appendChild(tr)
				}
			})
			.catch(function(error) {
				console.log(error)
			})
		})
		.catch(function(error) {
			console.log(error)
		})

	</script>

 <!-- <div class="ui vertical stripe segment">
	  <div class="ui aligned centered stackable grid container">
	    <h1 class="ui icon header">
	      <i class="thumbs up icon"></i>
	      <div class="content">
	        {{Tr(Lang, "home.awesomeness")}}
	        <div class="sub header">{{Tr(Lang, "home.awesomeness_desc")}}</div>
	      </div>
	    </h1>
	  </div>
	  <div class="ui aligned centered stackable four column grid container">
	    <div class="column">
	      <h3 class="ui header">
	        <i class="file text icon"></i> {{Tr(Lang, "home.markdown")}}
	      </h3>
	      <p>{{Tr(Lang, "home.markdown_desc")}}</p>
	    </div>
	    <div class="column">
	      <h3 class="ui header">
	        <i class="rocket icon"></i> {{Tr(Lang, "home.webhook")}}
	      </h3>
	      <p>{{Tr(Lang, "home.webhook_desc")}}</p>
	    </div>
	    <div class="column">
	      <h3 class="ui header">
	        <i class="settings icon"></i> {{Tr(Lang, "home.configurable")}}
	      </h3>
	      <p>{{Tr(Lang, "home.configurable_desc")}}</p>
	    </div>
	    <div class="column">
	      <h3 class="ui header">
	        <i class="comments icon"></i> {{Tr(Lang, "home.disqus")}}
	      </h3>
	      <p>{{Tr(Lang, "home.disqus_desc")}}</p>
	    </div>
	    <div class="row">
	      <div class="center aligned column">
	        <a class="ui huge blue button">{{Tr(Lang, "home.check_them_out")}}</a>
	      </div>
	    </div>
	    <h4 class="ui horizontal header divider">
	      <a href="">{{Tr(Lang, "home.case_study")}}</a>
	    </h4>
	  </div>
	</div> -->

	{% include Page.FooterTplPath %}
{% endblock %}